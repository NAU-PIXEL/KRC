FLOW.TXT KRC System: Subroutine Calls and COMMON usage	 2013jan14

~: optional
-: 
.: if an atmosphere
k: if T-dependent
(n = call with control code =n

.
References to *.INC COMMON's

L=List  N=Nolist  X=explicit code

	KRCCOM	LATCOM	DAYCOM	UNITS	FILCOM	COMCOM	PORBCM
KRC	L	L	L	L	L	L	X
TSEAS	N			N		N
TLATS	N	N	N	N	N
TDAY	N		N	N
TCARD	N	N	N	N
TPRINT	N	N	N	N	N
TDISK	N	N		N	N
COMA	N	N		N		N
COMA2	N	N				N
PORB1				N			N
PORB							N
ALBVAR	N
TINT	N	N

no references to *.INC
AVEDAY  CP0	DATIME	EPRED	ORBIT	ROTATE	R2R

porbcm in PORB0 TSEAS TYEARP
TCARD calls PORB0

Call sequence, prepared for slide: crop  left=.22 bot=.72

KRC           /-> TSEAS        /--------------------------->TDAY (1
  R2R         ^  |->season     ^ /---->TLATS                  k EVMONO  4calls
  DATIME      ^  |  ~TCARD (2  ^ ^      ROTV              
  TCARD (1    ^  |  ^TDAY (1 ->/ ^      ~VLPRES                    
  ~TPRINT (1  ^  |  +PORB        ^      ~TPRINT (8                  
  DTIME       ^  |  ~SEASALB     ^ |-> latitude loop                     
-> case       ^  |  ~SEASTAU     ^ |    AVEDAY                       -/krc/flow
|  ~TCARD (2  ^  2  TLATS--->----/ |    ROTV 
|   TDAY (1   ^  |  .~TINT         |    VROTV                       
|  ~TPRINT (2 ^  |  ~TPRINT (5     |   .SIGMA                      
|  ~TDISK (1  ^  |  ~TPRINT (6     |   .~CLIMTAU                   
|  DATIME     ^  |  ~TDISK (5      |   .~ALBVAR                        
1 TSEAS --->--/  |  ~TDISK (2      |   .~CO2PT          /--->TDAY (2             
|  ~TPRINT (9    \<--season        ||->  timestep       ^  |>-day loop       
|  TCARD (2                        ||    ROTV           ^  ||>-timestep loop     
\<-case                            34   .DEDING2 (cos i ^  |||>-layer loop       
 +TDISK (4                         ||   .DEDING2 (cos t ^  456  k EVMONO  4calls
                                   |\<-- timestep       ^  ||\<-layer         
 : always                          |    AVEYEAR         ^  |\<-timestep       
+: usually                         |   ~TPRINT (3       ^  \<-day             
~: if invoked                      |    TDAY (2 --->---/    [only if blowup]
.: if an atmosphere                |    EPRED [5 times]      TPRINT (7    
k: if T-dependent                  |   ~TPRINT (4            TPRINT (2       
^ coupled to above                 \<---latitude             TPRINT (4 
(n: call with control code n 

KRC...
  PORB
    ORBIT
    ROTVEC

crop left=.22 bot=.2 right=2.

PORBMN  Main program. Includes 'porbcm.inc'
  DATIME   Returns current date and time
 may call the following in any order. All INCLUDE 'porbcm.inc'
  PORB1    Read orbital elements, compute matrices
    PORBEL    Read any of 4 orbital element files, compute basic constants
      YMD2JD    Convert year, month, day to Julian date offset from 2,440,000
    OBLIQ     Compute Planets poles in ecliptic coord and nodes
    OBLIP     Compute obliquity of a planet  
    ROTDIA 2x
    ROTAX  10x
  PORBIO   Read/write Common to file as text or binary
  EPHEMR   Print ephemeris == geometry versus time
    PORB     Computes planetary angles and location for specific time
      ORBIT    Compute location of body in its orbital plane
      ROTVEC    Apply rotation matrix to rotate a vector
    CALDATE
    SPCREV
    ANG360
  PORBQQ   Test computation of matrices
    ROTDIA 2x
    ROTAX  4x
    MPRINT 3x
    MPROD3 2x 
