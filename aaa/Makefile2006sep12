# Makefile for KRC  2006apr12  Remove references to libraries

include ./sysdef.rules

#---------------------------------------------
#? ELIB2= -L/usr/local/lib -lsys_fieee  # for chkmath
# set search path for source files

# system dependencies
OBJECTS1 = tseas.o tlats.o tday.o tcard.o tprint.o tdisk.o epred.o \
           seasalb.o  seastau.o \
           porb0.o tint.o albvar.o co2pt.o vlpres.o aveday.o porb.o orbit.o \
           eccanom.o alsubs.o deding2.o rndex.o rterp.o readtxt360.o \
	   b_alloc.o b_c2fstr.o  b_f2cstr.o \
	   primio.o pio_bind_c.o  u_move4.o u_move1.o u_swapn.o \
	   b2b.o binf5.o binf5_bind.o catime.o datime.o idarch.o r2r.o rotmsp.o \
	   sigma.o vaddsp.o white1.o xtreme.o  

# normal link
krc: krc.o $(OBJECTS1)     # -xl required for record length to be in words
	$(FC) $(LDFLAGS)  -o $@  krc.o $(OBJECTS1) \
	$(SYSLIBS)

# IDL driver link
krci: idlkrc.o $(OBJECTS1)     # -xl required for record length to be in words
	$(FC) $(LDFLAGS) $(LIBDIRS) -o $@ idlkrc.o $(OBJECTS2) \
	$(HLIB) $(CLIB) $(SYSLIBS)

#
# make routines for program dependencies
#
krc.o: krc.f krccom.inc latcom.inc daycom.inc units.inc filcom.inc 
idlkrc.o: idlkrc.f krccom.inc latcom.inc daycom.inc units.inc filcom.inc

test.o: test.f krccom.inc latcom.inc daycom.inc units.inc filcom.inc
tseas.o: tseas.f krccom.inc units.inc 
tlats.o: tlats.f krccom.inc latcom.inc daycom.inc hatcom.inc units.inc
tday.o: tday.f krccom.inc daycom.inc hatcom.inc units.inc

tcard.o: tcard.f krccom.inc latcom.inc daycom.inc units.inc
tprint.o: tprint.f krccom.inc latcom.inc daycom.inc units.inc filcom.inc
tdisk.o: tdisk.f krccom.inc latcom.inc daycom.inc hatcom.inc units.inc filcom.inc
seasalb.o: seasalb.f units.inc filcom.inc
seastau.o: seastau.f units.inc filcom.inc

porb1.o: porb1.f units.inc porbcm.inc

albvar.o:  albvar.f
alsubs.o:  alsubs.f
aveday.o:  aveday.f
binf5.o:   binf5.F binf5.h binding.h   # calls pio_ & idarch
b2b.o:     b2b.f
b_alloc.o:  b_alloc.c
binf5_bind.o: binf5_bind.c
b_c2fstr.o: b_c2fstr.c
b_f2cstr.o: b_f2cstr.c
catime.o:  catime.f
co2pt.o:   co2pt.f
datime.o:  datime.f
deding2.o: deding2.f
eccanom.o: eccanom.f
idarch.o:  idarch.F 
orbit.o:   orbit.f
porb.o:    porb.f
porb0.o:   porb0.f
r2r.o:     r2r.f 
rotmsp.o:  rotmsp.f  # several rotation rooutines
rndex.o:   rndex.f
rterp.o:   rterp.f
readtxt360.o: readtxt360.f
sigma.o:   sigma.f 
tint.o:    tint.f
vaddsp.o:  vaddsp.f   # several vector routines
vlpres.o:  vlpres.f
white1.o:  white1.f
xtreme.o:  xtreme.f

testt.o:   testr.f

primio.o:  binding.h primio.h primio.c pio_bind_c.c # several pio_ routines
u_move1.o: u_move1.c
u_move4.o: u_move4.c
u_swapn.o: u_swapn.c

#
# Make clean
#
clean:
	-unalias rm; rm -f *.o
realclean:
	-rm krc
	-rm *.o 
