# Makefile for KRC, KRCC1, META, YEAR programs
# Created March 2, 1993
# Edited March 17, 1994 97may30
#include $(AHOME)/for/rules
#---------------------------------------------
HOME = /home/hkieffer  # set HOME directory path

# set up my fortran libraries & ernies(?) libraries
HLIB = -L$(HOME)/lib -lhk_ftin -lhk_fmath -lhk_ftime -lhk_frad -lhk_ffile -lhk_futil -lhk_fchar
HLIB1 = -L$(HOME)/lib  -lhk_futil -lhk_ffile 
ELIB  = -L/usr/local/lib -lsys_ffile -lsys_fchar
CLIB  = -L$(HOME)/hydice/one -lprimio -lm -lc
NRLIB = -L/usr/local/lib -lsys_nrf
# Compiler and Linker variables on Sun systems (SunSoft)

FFLAGS =   -O -xl #   -xl -g -C -fnonstd  # Fortran option flags xl=Sun-specific extended language  g=debugger  C=Check_subscripts  O+Optomize  fnonstd=arithmatic

F77 = f77 $(FFLAGS) # tells make which compiler to use   F77 = g77 for gnu
CC = gcc        # C compiler to use [gnu]
CFLAGS = -c -O  # C compiler options flags  c=compile only  O=optomize
#---------------------------------------------
ELIB2= -L/usr/local/lib -lsys_fieee  # for chkmath
# set search path for source files
VPATH = $(HOME)/krc/mars:$(HOME)/krc/porb:$(HOME)/lib/for/ernie # ernie for chkmath

# \
#       $(HOME)/util:/home/ecisnero/progs/fortran

# system dependencies
OBJECTS1 = krc.o tseas.o tlats.o tday.o tcard.o tprint.o tdisk.o epred.o \
           porb0.o tint.o albvar.o co2pt.o vlpres.o aveday.o porb.o orbit.o \
           eccanom.o chkmath.o

OBJD = krc.d tseas.d tlats.d tday.d tcard.d tprint.d tdisk.d epred.d \
           porb0.d tint.d albvar.d co2pt.d vlpres.d aveday.d porb.d orbit.d \
           eccanom.d chkmath.d

# normal link
krc: $(OBJECTS1)     # -xl required for record length to be in words
	$(F77) -o krc $(OBJECTS1) $(HLIB)

# link for debugger <<<< NOT COMPLETED
krcd: $(OBJD)     # -xl required for record length to be in words
	f77  -xl -g -C -fnonstd -o krcd $(OBJD) $(HLIB)

# to invoke ISIS traps
krcf: $(OBJECTS1)     # -xl required for record length to be in words
	$(F77) -o krc $(OBJECTS1) $(HLIB) -L$(ISISLIB) -lisis -lisisgen -lbind



test: test.o vlpres.o 
	f77 -xl -o test  test.o vlpres.o  -L$(HOME)/lib -lhk_futil -lhk_ftime 

#
# make routines for program dependencies
#
krc.o: krc.f krccom.inc latcom.inc daycom.inc units.inc filcom.inc 
	$(F77) -c $*.f

test.o: test.f krccom.inc latcom.inc daycom.inc units.inc filcom.inc 
	f77 -xl -c  $*.f

tseas.o: tseas.f krccom.inc units.inc 
	$(F77) -c  $*.f

tlats.o: tlats.f krccom.inc latcom.inc daycom.inc  units.inc
	$(F77) -c  $*.f

tday.o: tday.f krccom.inc daycom.inc units.inc
	$(F77) -c  $*.f

tcard.o: tcard.f krccom.inc latcom.inc daycom.inc units.inc
	$(F77) -c  $*.f

tprint.o: tprint.f krccom.inc latcom.inc daycom.inc units.inc filcom.inc
	$(F77) -c  $*.f

tdisk.o: tdisk.f krccom.inc latcom.inc daycom.inc units.inc filcom.inc
	$(F77) -c  $*.f

porb1.o: porb1.f units.inc $(HOME)/krc/porb/porbcm.inc
	$(F77) -c  $*.f

co2pt.o: co2pt.f
	$(F77) -c  $*.f

vlpres.o: vlpres.f
	$(F77) -c  $*.f
#
# Make clean
#
clean:
	-rm *.o 
realclean:
	-rm krc
	-rm *.o 
